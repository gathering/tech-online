<!DOCTYPE html>
<html>
  <head>
    <style>
      * {
        font-family: -apple-system, BlinkMacSystemFont, sans-serif,
          "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol";
      }

      html,
      body {
        height: 100%;
        width: 100%;
      }

      #kropp {
        display: flex;
        justify-content: center;
        align-items: center;
        background-color: red;
        margin: 0;
        padding: 0;
      }

      #ja {
        display: none;
      }

      #kropp.success {
        background-color: green;
      }

      #kropp.success > #container > #ja {
        display: block;
      }

      #kropp.success > #container > #nei {
        display: none;
      }

      #container {
        text-align: center;
      }
    </style>
  </head>
  <body id="kropp">
    <div id="container">
      <div id="nei">
        <h1>Internett sier: NEI NEI NEI VIL IKKE!</h1>
      </div>
      <div id="ja">
        <h1>MMMMM SWEET INTERNETT!</h1>
      </div>
      <h2 id="dato">DATO</h2>
    </div>
    <script>
      const kropp = document.getElementById("kropp");
      const dato = document.getElementById("dato");

      function jadda() {
        kropp.classList.add("success");
      }
      function neida() {
        kropp.classList.remove("success");
      }

      function sjekk() {
        fetch("https://techo.gathering.org/ping", {
          cache: "no-cache",
          mode: "cors",
        })
          .then((response) => {
            if (response.ok) {
              jadda();
            } else {
              neida();
            }
          })
          .catch((err) => {
            neida();
            console.warn(err);
          });
      }

      function setDate() {
        const date = new Date();

        dato.innerText = `${date.getHours()}:${date.getMinutes()}:${date.getSeconds()}`;
      }

      sjekk();
      setDate();

      setInterval(sjekk, 1000);
      setInterval(setDate, 970);
    </script>
  </body>
</html>
